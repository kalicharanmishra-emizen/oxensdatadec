{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _regeneratorRuntime from \"/var/www/domains/oxens.ezxdemo.com/public_html/admin/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/var/www/domains/oxens.ezxdemo.com/public_html/admin/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { useEffect, useState, useRef } from 'react';\nexport default function FormCKEditor(props) {\n  var editorRef = useRef();\n\n  var _useState = useState(false),\n      editorLoaded = _useState[0],\n      setEditorLoaded = _useState[1];\n\n  var _ref = editorRef.current || {},\n      CKEditor = _ref.CKEditor,\n      ClassicEditor = _ref.ClassicEditor;\n\n  useEffect(function () {\n    editorRef.current = {\n      CKEditor: require('@ckeditor/ckeditor5-react').CKEditor,\n      ClassicEditor: require('@ckeditor/ckeditor5-build-classic')\n    };\n    setEditorLoaded(true);\n  }, []);\n\n  var _useState2 = useState(''),\n      formData = _useState2[0],\n      setFormData = _useState2[1];\n\n  var _useState3 = useState(''),\n      validation = _useState3[0],\n      setValidation = _useState3[1];\n\n  var _useState4 = useState(false),\n      submitValidate = _useState4[0],\n      setsubmitValidate = _useState4[1];\n\n  useEffect(function () {\n    setFormData(props.defValue);\n\n    if (props.defValue != '') {\n      setValidation(null);\n    }\n  }, [props.defValue]);\n\n  var validateData = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(value) {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (!props.validator.required) {\n                setValidation(null);\n              } else {\n                if (value.length == 0) {\n                  setValidation(props.validator.message);\n                } else {\n                  setValidation(null);\n                }\n              }\n\n            case 1:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function validateData(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var handleChange = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(event, editor) {\n      var data;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              data = editor.getData(); // console.log( { event, editor, data } )\n\n              setFormData(data);\n              _context2.next = 4;\n              return validateData(data);\n\n            case 4:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function handleChange(_x2, _x3) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  useEffect(function () {\n    if (validation !== '') {\n      var rowReturnData = {\n        key: props.name,\n        error: validation,\n        data: formData\n      };\n      props.getValue(rowReturnData);\n    }\n  }, [validation, formData]);\n  useEffect(function () {\n    setsubmitValidate(props.submitValidate);\n  }, [props.submitValidate]);\n  useEffect(function () {\n    if (submitValidate) {\n      validateData(formData);\n    }\n  }, [submitValidate]);\n  return editorLoaded ? /*#__PURE__*/_jsxs(_Fragment, {\n    children: [/*#__PURE__*/_jsx(CKEditor, {\n      editor: ClassicEditor,\n      data: formData,\n      onChange: handleChange\n    }), validation ? /*#__PURE__*/_jsx(\"div\", {\n      className: \"validation-error-custome\",\n      children: validation\n    }) : '']\n  }) : \"\";\n}","map":null,"metadata":{},"sourceType":"module"}