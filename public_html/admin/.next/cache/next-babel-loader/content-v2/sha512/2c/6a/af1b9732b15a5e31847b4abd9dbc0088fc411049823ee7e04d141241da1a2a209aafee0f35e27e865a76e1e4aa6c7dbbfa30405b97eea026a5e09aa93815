{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Col, FormGroup, Row, Table } from 'reactstrap';\nimport PaginationServer from '../Pagination/PaginationServer';\nimport { getDriverIncome } from '../../reducers/driverSlice';\nimport Loader from '../ApiLoader/loader';\nimport moment from 'moment';\nimport DatePicker from 'react-datepicker';\nimport \"react-datepicker/dist/react-datepicker.css\";\n\nconst Income = ({\n  activeTab,\n  driverId\n}) => {\n  const dispatch = useDispatch();\n  const {\n    0: loader,\n    1: setLoader\n  } = useState(true);\n  const {\n    0: incomeList,\n    1: setDriverList\n  } = useState([]);\n  const {\n    0: paginationData,\n    1: setPaginationData\n  } = useState({});\n  const {\n    0: filterData,\n    1: setFilterData\n  } = useState({\n    startDate: '',\n    endDate: ''\n  });\n  const getIncomeList = useSelector(state => state.driverSlice.driverIncome);\n\n  const pageChange = data => {\n    setLoader(true);\n    dispatch(getDriverIncome({\n      page: data,\n      driverId: driverId\n    }, filterData));\n  };\n\n  const handelFilter = type => {\n    if (type === 'reset') {\n      setFilterData({\n        startDate: '',\n        endDate: ''\n      });\n      dispatch(getDriverIncome({\n        page: 1,\n        driverId: driverId\n      }, {}));\n    } else {\n      dispatch(getDriverIncome({\n        page: 1,\n        driverId: driverId\n      }, filterData));\n    }\n  };\n\n  useEffect(() => {\n    if (activeTab) {\n      setLoader(true);\n      dispatch(getDriverIncome({\n        page: 1,\n        driverId: driverId\n      }, filterData));\n    }\n  }, [activeTab]);\n  useEffect(() => {\n    if (getIncomeList) {\n      let pagData = {\n        totalDocs: getIncomeList.totalDocs,\n        limit: getIncomeList.limit,\n        page: getIncomeList.page,\n        totalPages: getIncomeList.totalPages,\n        hasPrevPage: getIncomeList.hasPrevPage,\n        hasNextPage: getIncomeList.hasNextPage,\n        prevPage: getIncomeList.prevPage,\n        nextPage: getIncomeList.nextPage\n      };\n      setPaginationData(pagData);\n      setDriverList(getIncomeList.docs);\n      setLoader(false);\n    }\n  }, [getIncomeList]);\n  return /*#__PURE__*/_jsxs(\"div\", {\n    className: \"row\",\n    children: [/*#__PURE__*/_jsxs(Col, {\n      xl: \"12\",\n      children: [/*#__PURE__*/_jsx(\"h4\", {\n        children: \"Filter\"\n      }), /*#__PURE__*/_jsxs(Row, {\n        children: [/*#__PURE__*/_jsx(Col, {\n          md: \"4\",\n          children: /*#__PURE__*/_jsxs(FormGroup, {\n            children: [/*#__PURE__*/_jsx(\"label\", {\n              children: \"Date From\"\n            }), /*#__PURE__*/_jsx(DatePicker, {\n              className: \"form-control\",\n              selected: filterData.startDate != '' ? new Date(filterData.startDate) : null,\n              maxDate: filterData.endDate != '' ? new Date(filterData.endDate) : null,\n              onChange: date => {\n                filterData.startDate = moment(date).format('YYYY-MM-DD');\n                setFilterData(_objectSpread({}, filterData));\n              }\n            })]\n          })\n        }), /*#__PURE__*/_jsx(Col, {\n          md: \"4\",\n          children: /*#__PURE__*/_jsxs(FormGroup, {\n            children: [/*#__PURE__*/_jsx(\"label\", {\n              children: \"Date To\"\n            }), /*#__PURE__*/_jsx(DatePicker, {\n              className: \"form-control\",\n              selected: filterData.endDate != '' ? new Date(filterData.endDate) : null,\n              minDate: filterData.startDate != '' ? new Date(filterData.startDate) : null,\n              onChange: date => {\n                filterData.endDate = moment(date).format('YYYY-MM-DD');\n                setFilterData(_objectSpread({}, filterData));\n              }\n            })]\n          })\n        }), /*#__PURE__*/_jsxs(Col, {\n          md: \"4\",\n          className: \"mt-md-4 mt-0\",\n          children: [/*#__PURE__*/_jsx(\"button\", {\n            type: \"button\",\n            className: \"btn btn-success\",\n            onClick: () => handelFilter('filter'),\n            children: \"Filter\"\n          }), /*#__PURE__*/_jsx(\"button\", {\n            type: \"button\",\n            className: \"btn btn-info\",\n            onClick: () => handelFilter('reset'),\n            children: \"Reset\"\n          })]\n        })]\n      })]\n    }), /*#__PURE__*/_jsx(Col, {\n      xl: \"12\",\n      children: /*#__PURE__*/_jsxs(Table, {\n        children: [/*#__PURE__*/_jsx(\"thead\", {\n          children: /*#__PURE__*/_jsxs(\"tr\", {\n            children: [/*#__PURE__*/_jsx(\"td\", {\n              children: \"#\"\n            }), /*#__PURE__*/_jsx(\"td\", {\n              children: \"Earning\"\n            }), /*#__PURE__*/_jsx(\"td\", {\n              children: \"Tip\"\n            }), /*#__PURE__*/_jsx(\"td\", {\n              children: \"Store\"\n            }), /*#__PURE__*/_jsx(\"td\", {\n              children: \"Order Number\"\n            }), /*#__PURE__*/_jsx(\"td\", {\n              children: \"CreatedAt\"\n            })]\n          })\n        }), /*#__PURE__*/_jsx(\"tbody\", {\n          children: loader ? /*#__PURE__*/_jsx(\"tr\", {\n            children: /*#__PURE__*/_jsx(\"td\", {\n              colSpan: \"6\",\n              children: /*#__PURE__*/_jsx(Loader, {})\n            })\n          }) : incomeList.length == 0 ? /*#__PURE__*/_jsx(\"tr\", {\n            children: /*#__PURE__*/_jsx(\"td\", {\n              colSpan: \"6\",\n              children: \"No Data Found\"\n            })\n          }) : incomeList.map((item, key) => /*#__PURE__*/_jsxs(\"tr\", {\n            children: [/*#__PURE__*/_jsxs(\"td\", {\n              children: [\" \", paginationData.page + key, \" \"]\n            }), /*#__PURE__*/_jsxs(\"td\", {\n              children: [\" \", item.earning, \" \"]\n            }), /*#__PURE__*/_jsxs(\"td\", {\n              children: [\" \", item.tip, \" \"]\n            }), /*#__PURE__*/_jsxs(\"td\", {\n              children: [\" \", item.storeDetail.name, \" \"]\n            }), /*#__PURE__*/_jsxs(\"td\", {\n              children: [\" \", item.orderDetail.orderNumber, \" \"]\n            }), /*#__PURE__*/_jsxs(\"td\", {\n              children: [\" \", moment(item.createdAt).format('MMMM Do YYYY, h:mm:ss a'), \" \"]\n            })]\n          }, item._id))\n        }), /*#__PURE__*/_jsx(\"tfoot\", {\n          children: /*#__PURE__*/_jsx(\"tr\", {\n            children: /*#__PURE__*/_jsx(\"td\", {\n              colSpan: 6,\n              className: \"text-right\",\n              children: paginationData ? /*#__PURE__*/_jsx(PaginationServer, {\n                data: paginationData,\n                pagFun: pageChange\n              }) : null\n            })\n          })\n        })]\n      })\n    })]\n  });\n};\n\nexport default Income;","map":null,"metadata":{},"sourceType":"module"}