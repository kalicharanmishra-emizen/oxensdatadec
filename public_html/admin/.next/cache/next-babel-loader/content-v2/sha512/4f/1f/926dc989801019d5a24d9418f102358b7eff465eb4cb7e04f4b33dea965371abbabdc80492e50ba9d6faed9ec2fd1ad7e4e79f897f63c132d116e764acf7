{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport _defineProperty from \"/var/www/domains/oxens.ezxdemo.com/public_html/admin/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Col, FormGroup, Row, Table } from 'reactstrap';\nimport PaginationServer from '../Pagination/PaginationServer';\nimport { getDriverIncome } from '../../reducers/driverSlice';\nimport Loader from '../ApiLoader/loader';\nimport moment from 'moment';\nimport DatePicker from 'react-datepicker';\nimport \"react-datepicker/dist/react-datepicker.css\";\n\nvar Income = function Income(_ref) {\n  var activeTab = _ref.activeTab,\n      driverId = _ref.driverId;\n  var dispatch = useDispatch();\n\n  var _useState = useState(true),\n      loader = _useState[0],\n      setLoader = _useState[1];\n\n  var _useState2 = useState([]),\n      incomeList = _useState2[0],\n      setDriverList = _useState2[1];\n\n  var _useState3 = useState({}),\n      paginationData = _useState3[0],\n      setPaginationData = _useState3[1];\n\n  var _useState4 = useState({\n    startDate: '',\n    endDate: ''\n  }),\n      filterData = _useState4[0],\n      setFilterData = _useState4[1];\n\n  var getIncomeList = useSelector(function (state) {\n    return state.driverSlice.driverIncome;\n  });\n\n  var pageChange = function pageChange(data) {\n    setLoader(true);\n    dispatch(getDriverIncome({\n      page: data,\n      driverId: driverId\n    }, filterData));\n  };\n\n  var handelFilter = function handelFilter(type) {\n    if (type === 'reset') {\n      setFilterData({\n        startDate: '',\n        endDate: ''\n      });\n      dispatch(getDriverIncome({\n        page: 1,\n        driverId: driverId\n      }, {}));\n    } else {\n      dispatch(getDriverIncome({\n        page: 1,\n        driverId: driverId\n      }, filterData));\n    }\n  };\n\n  useEffect(function () {\n    if (activeTab) {\n      setLoader(true);\n      dispatch(getDriverIncome({\n        page: 1,\n        driverId: driverId\n      }, filterData));\n    }\n  }, [activeTab]);\n  useEffect(function () {\n    if (getIncomeList) {\n      var pagData = {\n        totalDocs: getIncomeList.totalDocs,\n        limit: getIncomeList.limit,\n        page: getIncomeList.page,\n        totalPages: getIncomeList.totalPages,\n        hasPrevPage: getIncomeList.hasPrevPage,\n        hasNextPage: getIncomeList.hasNextPage,\n        prevPage: getIncomeList.prevPage,\n        nextPage: getIncomeList.nextPage\n      };\n      setPaginationData(pagData);\n      setDriverList(getIncomeList.docs);\n      setLoader(false);\n    }\n  }, [getIncomeList]);\n  return /*#__PURE__*/_jsxs(\"div\", {\n    className: \"row\",\n    children: [/*#__PURE__*/_jsxs(Col, {\n      xl: \"12\",\n      children: [/*#__PURE__*/_jsx(\"h4\", {\n        children: \"Filter\"\n      }), /*#__PURE__*/_jsxs(Row, {\n        children: [/*#__PURE__*/_jsx(Col, {\n          md: \"4\",\n          children: /*#__PURE__*/_jsxs(FormGroup, {\n            children: [/*#__PURE__*/_jsx(\"label\", {\n              children: \"Date From\"\n            }), /*#__PURE__*/_jsx(DatePicker, {\n              className: \"form-control\",\n              selected: filterData.startDate != '' ? new Date(filterData.startDate) : null,\n              maxDate: filterData.endDate != '' ? new Date(filterData.endDate) : null,\n              onChange: function onChange(date) {\n                filterData.startDate = moment(date).format('YYYY-MM-DD');\n                setFilterData(_objectSpread({}, filterData));\n              }\n            })]\n          })\n        }), /*#__PURE__*/_jsx(Col, {\n          md: \"4\",\n          children: /*#__PURE__*/_jsxs(FormGroup, {\n            children: [/*#__PURE__*/_jsx(\"label\", {\n              children: \"Date To\"\n            }), /*#__PURE__*/_jsx(DatePicker, {\n              className: \"form-control\",\n              selected: filterData.endDate != '' ? new Date(filterData.endDate) : null,\n              minDate: filterData.startDate != '' ? new Date(filterData.startDate) : null,\n              onChange: function onChange(date) {\n                filterData.endDate = moment(date).format('YYYY-MM-DD');\n                setFilterData(_objectSpread({}, filterData));\n              }\n            })]\n          })\n        }), /*#__PURE__*/_jsxs(Col, {\n          md: \"4\",\n          className: \"mt-md-4 mt-0\",\n          children: [/*#__PURE__*/_jsx(\"button\", {\n            type: \"button\",\n            className: \"btn btn-success\",\n            onClick: function onClick() {\n              return handelFilter('filter');\n            },\n            children: \"Filter\"\n          }), /*#__PURE__*/_jsx(\"button\", {\n            type: \"button\",\n            className: \"btn btn-info\",\n            onClick: function onClick() {\n              return handelFilter('reset');\n            },\n            children: \"Reset\"\n          })]\n        })]\n      })]\n    }), /*#__PURE__*/_jsx(Col, {\n      xl: \"12\",\n      children: /*#__PURE__*/_jsxs(Table, {\n        children: [/*#__PURE__*/_jsx(\"thead\", {\n          children: /*#__PURE__*/_jsxs(\"tr\", {\n            children: [/*#__PURE__*/_jsx(\"td\", {\n              children: \"#\"\n            }), /*#__PURE__*/_jsx(\"td\", {\n              children: \"Earning\"\n            }), /*#__PURE__*/_jsx(\"td\", {\n              children: \"Tip\"\n            }), /*#__PURE__*/_jsx(\"td\", {\n              children: \"Store\"\n            }), /*#__PURE__*/_jsx(\"td\", {\n              children: \"Order Number\"\n            }), /*#__PURE__*/_jsx(\"td\", {\n              children: \"CreatedAt\"\n            })]\n          })\n        }), /*#__PURE__*/_jsx(\"tbody\", {\n          children: loader ? /*#__PURE__*/_jsx(\"tr\", {\n            children: /*#__PURE__*/_jsx(\"td\", {\n              colSpan: \"6\",\n              children: /*#__PURE__*/_jsx(Loader, {})\n            })\n          }) : incomeList.length == 0 ? /*#__PURE__*/_jsx(\"tr\", {\n            children: /*#__PURE__*/_jsx(\"td\", {\n              colSpan: \"6\",\n              children: \"No Data Found\"\n            })\n          }) : incomeList.map(function (item, key) {\n            return /*#__PURE__*/_jsxs(\"tr\", {\n              children: [/*#__PURE__*/_jsxs(\"td\", {\n                children: [\" \", paginationData.page + key, \" \"]\n              }), /*#__PURE__*/_jsxs(\"td\", {\n                children: [\" \", item.earning, \" \"]\n              }), /*#__PURE__*/_jsxs(\"td\", {\n                children: [\" \", item.tip, \" \"]\n              }), /*#__PURE__*/_jsxs(\"td\", {\n                children: [\" \", item.storeDetail.name, \" \"]\n              }), /*#__PURE__*/_jsxs(\"td\", {\n                children: [\" \", item.orderDetail.orderNumber, \" \"]\n              }), /*#__PURE__*/_jsxs(\"td\", {\n                children: [\" \", moment(item.createdAt).format('MMMM Do YYYY, h:mm:ss a'), \" \"]\n              })]\n            }, item._id);\n          })\n        }), /*#__PURE__*/_jsx(\"tfoot\", {\n          children: /*#__PURE__*/_jsx(\"tr\", {\n            children: /*#__PURE__*/_jsx(\"td\", {\n              colSpan: 6,\n              className: \"text-right\",\n              children: paginationData ? /*#__PURE__*/_jsx(PaginationServer, {\n                data: paginationData,\n                pagFun: pageChange\n              }) : null\n            })\n          })\n        })]\n      })\n    })]\n  });\n};\n\nexport default Income;","map":null,"metadata":{},"sourceType":"module"}