{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _regeneratorRuntime from \"/var/www/domains/oxens.ezxdemo.com/public_html/vendor/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/var/www/domains/oxens.ezxdemo.com/public_html/vendor/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _jsxFileName = \"/var/www/domains/oxens.ezxdemo.com/public_html/vendor/components/Profile/StoreImages.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { Button, Col, Form, FormGroup, Input, Row } from 'reactstrap';\nimport { callApi } from '../../Helper/helper';\nimport { getProfile } from \"reducers/authSlice\";\nimport { apiFail } from '../../reducers/mainSlice';\nimport NProgress from 'nprogress';\nexport default function StoreImages(props) {\n  _s();\n\n  var _this = this;\n\n  var dispatch = useDispatch();\n\n  var _useState = useState(null),\n      mainTemp = _useState[0],\n      setMainTemp = _useState[1];\n\n  var _useState2 = useState(null),\n      otherTemp = _useState2[0],\n      setOtherTemp = _useState2[1];\n\n  var _useState3 = useState(null),\n      mainImage = _useState3[0],\n      setMainImage = _useState3[1];\n\n  var _useState4 = useState([]),\n      otherImage = _useState4[0],\n      setOtherImage = _useState4[1];\n\n  useEffect(function () {\n    var mainImageRaw = props.images.find(function (data) {\n      return data.img_type === 'main';\n    });\n    var otherImageRaw = props.images.filter(function (data) {\n      return data.img_type === 'other';\n    });\n    setMainImage(mainImageRaw === undefined ? null : mainImageRaw);\n    setOtherImage(otherImageRaw);\n  }, [props.images]);\n\n  var uploadImage = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(e) {\n      var formData;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              formData = new FormData();\n              formData.append('type', e.target.getAttribute('datafor'));\n\n              if (e.target.getAttribute('datafor') == 'other') {\n                formData.append('image', otherTemp);\n                setOtherTemp(null);\n                document.getElementById('otherImage').value = '';\n              } else {\n                formData.append('image', mainTemp);\n                setMainTemp(null);\n                document.getElementById('mainImage').value = '';\n              } // props.setLoaderStatus(true);\n\n\n              _context.prev = 3;\n              NProgress.start();\n              _context.next = 7;\n              return callApi('post', '/auth/savevendorimages', formData, {\n                'Content-Type': 'multipart/form-data'\n              });\n\n            case 7:\n              dispatch(getProfile());\n              _context.next = 13;\n              break;\n\n            case 10:\n              _context.prev = 10;\n              _context.t0 = _context[\"catch\"](3);\n              dispatch(apiFail(_context.t0));\n\n            case 13:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[3, 10]]);\n    }));\n\n    return function uploadImage(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var mainImageChange = function mainImageChange(e) {\n    setMainTemp(e.target.files[0]);\n  };\n\n  var otherImageChange = function otherImageChange(e) {\n    setOtherTemp(e.target.files[0]);\n  };\n\n  var removeImage = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e) {\n      var imgId;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              imgId = e.target.getAttribute('imgid');\n              _context2.prev = 1;\n              NProgress.start();\n              _context2.next = 5;\n              return callApi('post', '/auth/removevendorimages', {\n                imgId: imgId\n              });\n\n            case 5:\n              dispatch(getProfile());\n              _context2.next = 11;\n              break;\n\n            case 8:\n              _context2.prev = 8;\n              _context2.t0 = _context2[\"catch\"](1);\n              dispatch(apiFail(_context2.t0));\n\n            case 11:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[1, 8]]);\n    }));\n\n    return function removeImage(_x2) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"profile-block\",\n    children: /*#__PURE__*/_jsxDEV(Form, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"pl-lg-4\",\n        children: /*#__PURE__*/_jsxDEV(Row, {\n          children: [/*#__PURE__*/_jsxDEV(Col, {\n            lg: \"8\",\n            children: /*#__PURE__*/_jsxDEV(FormGroup, {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"form-control-label\",\n                htmlFor: \"old_pass\",\n                children: \"Big Images\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 71,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(Input, {\n                type: \"file\",\n                id: \"mainImage\",\n                className: \"form-control-alternative\",\n                onChange: mainImageChange\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 77,\n                columnNumber: 29\n              }, this), mainTemp != null ? /*#__PURE__*/_jsxDEV(Button, {\n                className: \"btn btn-success mt-4\",\n                type: \"button\",\n                datafor: \"main\",\n                onClick: uploadImage,\n                children: \"Upload\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 85,\n                columnNumber: 37\n              }, this) : \"\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 70,\n              columnNumber: 25\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 69,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(Col, {\n            lg: \"4\",\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              children: \"Preview Image\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 98,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n              className: \"img-fluid\",\n              src: mainTemp != null ? URL.createObjectURL(mainTemp) : require('assets/img/theme/img01.jpg'),\n              alt: \"preview image\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 101,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(Col, {\n            lg: \"12\",\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              children: \" Upload Image\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 108,\n              columnNumber: 25\n            }, this), mainImage ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"img-block\",\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                src: mainImage.image,\n                className: \"img-fluid\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 111,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                role: \"button\",\n                imgid: mainImage._id,\n                onClick: removeImage,\n                children: \"\\xD7\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 115,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 110,\n              columnNumber: 29\n            }, this) : '']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(Col, {\n            lg: \"8\",\n            children: /*#__PURE__*/_jsxDEV(FormGroup, {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"form-control-label\",\n                htmlFor: \"old_pass\",\n                children: \"Other Images\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 126,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(Input, {\n                type: \"file\",\n                id: \"otherImage\",\n                className: \"form-control-alternative\",\n                onChange: otherImageChange\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 132,\n                columnNumber: 29\n              }, this), otherTemp != null ? /*#__PURE__*/_jsxDEV(Button, {\n                className: \"btn btn-success mt-4\",\n                type: \"button\",\n                datafor: \"other\",\n                onClick: uploadImage,\n                children: \"Upload\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 139,\n                columnNumber: 37\n              }, this) : \"\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 125,\n              columnNumber: 25\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 124,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(Col, {\n            lg: \"4\",\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              children: \"Preview Image\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 152,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n              className: \"img-fluid\",\n              src: otherTemp != null ? URL.createObjectURL(otherTemp) : require('assets/img/theme/img01.jpg'),\n              alt: \"preview image\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 155,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 151,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(Col, {\n            lg: \"12\",\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              children: \" Upload Image\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 162,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(Row, {\n              children: otherImage.map(function (value, key) {\n                return /*#__PURE__*/_jsxDEV(Col, {\n                  lg: \"3\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"img-block\",\n                    children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                      src: value.image,\n                      className: \"img-fluid\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 167,\n                      columnNumber: 37\n                    }, _this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      role: \"button\",\n                      imgid: value._id,\n                      onClick: removeImage,\n                      children: \"\\xD7\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 171,\n                      columnNumber: 37\n                    }, _this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 166,\n                    columnNumber: 37\n                  }, _this)\n                }, key, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 165,\n                  columnNumber: 33\n                }, _this);\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 163,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 161,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 65,\n    columnNumber: 9\n  }, this);\n}\n\n_s(StoreImages, \"Rei2/uu40L6aNWunrh2XuQUZuO4=\", false, function () {\n  return [useDispatch];\n});\n\n_c = StoreImages;\n\nvar _c;\n\n$RefreshReg$(_c, \"StoreImages\");","map":{"version":3,"sources":["/var/www/domains/oxens.ezxdemo.com/public_html/vendor/components/Profile/StoreImages.js"],"names":["React","useEffect","useState","useDispatch","Button","Col","Form","FormGroup","Input","Row","callApi","getProfile","apiFail","NProgress","StoreImages","props","dispatch","mainTemp","setMainTemp","otherTemp","setOtherTemp","mainImage","setMainImage","otherImage","setOtherImage","mainImageRaw","images","find","data","img_type","otherImageRaw","filter","undefined","uploadImage","e","formData","FormData","append","target","getAttribute","document","getElementById","value","start","mainImageChange","files","otherImageChange","removeImage","imgId","URL","createObjectURL","require","image","_id","map","key"],"mappings":"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","sourcesContent":["import React,{ useEffect, useState }from 'react'\nimport { useDispatch } from 'react-redux'\nimport { Button, Col, Form, FormGroup, Input, Row } from 'reactstrap'\nimport { callApi } from '../../Helper/helper';\nimport { getProfile } from \"reducers/authSlice\";\nimport { apiFail } from '../../reducers/mainSlice';\nimport NProgress from 'nprogress';\nexport default function StoreImages(props) {\n    const dispatch = useDispatch()\n    const [mainTemp, setMainTemp] = useState(null)\n    const [otherTemp, setOtherTemp] = useState(null)\n    const [mainImage, setMainImage] = useState(null)\n    const [otherImage, setOtherImage] = useState([])\n    useEffect(() => {\n        let mainImageRaw = props.images.find(data=>{\n            return data.img_type==='main'\n        })\n        let otherImageRaw = props.images.filter(data=>{\n            return data.img_type==='other'\n        })\n        setMainImage((mainImageRaw === undefined)?null:mainImageRaw);\n        setOtherImage(otherImageRaw)\n    }, [props.images])\n\n    const uploadImage = async (e) =>{\n        let formData = new FormData();\n        formData.append('type',e.target.getAttribute('datafor'))\n        if(e.target.getAttribute('datafor') == 'other'){\n            formData.append('image',otherTemp)\n            setOtherTemp(null);\n            document.getElementById('otherImage').value =''\n        }else{\n            formData.append('image',mainTemp)\n            setMainTemp(null);\n            document.getElementById('mainImage').value =''\n        }\n        // props.setLoaderStatus(true);\n        try {\n            NProgress.start()\n            await callApi('post','/auth/savevendorimages',formData,{'Content-Type': 'multipart/form-data'});\n            dispatch(getProfile())\n        } catch (e) {\n            dispatch(apiFail(e))\n        }\n        \n        \n    }\n    const mainImageChange = (e) =>{\n        setMainTemp(e.target.files[0])\n    }\n    const otherImageChange = (e) =>{\n        setOtherTemp(e.target.files[0])\n    }\n    const removeImage = async (e) => {\n        let imgId = e.target.getAttribute('imgid');\n        try {\n            NProgress.start()\n            await callApi('post','/auth/removevendorimages',{imgId:imgId});\n            dispatch(getProfile())  \n        } catch (e) {\n            dispatch(apiFail(e))\n        }\n    }\n    return (\n        <div className=\"profile-block\">\n        <Form>\n            <div className=\"pl-lg-4\">\n                <Row>\n                    <Col lg=\"8\">\n                        <FormGroup>\n                            <label\n                                className=\"form-control-label\"\n                                htmlFor=\"old_pass\"\n                            >\n                                Big Images\n                            </label>\n                            <Input\n                                type=\"file\"\n                                id=\"mainImage\"\n                                className=\"form-control-alternative\"\n                                onChange={mainImageChange}\n                            />\n\n                            {(mainTemp != null)?\n                                    <Button\n                                        className=\"btn btn-success mt-4\"\n                                        type=\"button\"\n                                        datafor=\"main\"\n                                        onClick={uploadImage}\n                                    >\n                                        Upload    \n                                    </Button>\n                                :\"\"\n                            }\n                        </FormGroup>\n                    </Col>\n                    <Col lg=\"4\">\n                        <h4>\n                            Preview Image\n                        </h4>\n                        <img\n                            className=\"img-fluid\"\n                            src={(mainTemp != null)?URL.createObjectURL(mainTemp):require('assets/img/theme/img01.jpg')}\n                            alt=\"preview image\"\n                        />\n                    </Col>\n                    <Col lg=\"12\">\n                        <h4> Upload Image</h4>\n                        {mainImage?\n                            <div className=\"img-block\">\n                                <img\n                                    src={mainImage.image}\n                                    className=\"img-fluid\"\n                                />\n                                <span role=\"button\" imgid={mainImage._id} onClick={removeImage}>&times;</span>\n                            </div>\n                        :\n                        ''\n                        }\n                        \n                    </Col>\n\n\n                    <Col lg=\"8\">\n                        <FormGroup>\n                            <label\n                                className=\"form-control-label\"\n                                htmlFor=\"old_pass\"\n                            >\n                                Other Images\n                            </label>\n                            <Input\n                                type=\"file\"\n                                id=\"otherImage\"\n                                className=\"form-control-alternative\"\n                                onChange={otherImageChange}\n                            />\n                            {(otherTemp != null)?\n                                    <Button\n                                        className=\"btn btn-success mt-4\"\n                                        type=\"button\"\n                                        datafor=\"other\"\n                                        onClick={uploadImage}\n                                    >\n                                        Upload    \n                                    </Button>\n                                :\"\"\n                            }\n                        </FormGroup>\n                    </Col>\n                    <Col lg=\"4\">\n                        <h4>\n                            Preview Image\n                        </h4>\n                        <img\n                            className=\"img-fluid\"\n                            src={(otherTemp != null)?URL.createObjectURL(otherTemp):require('assets/img/theme/img01.jpg')}\n                            alt=\"preview image\"\n                        />\n                    </Col>\n                    <Col lg=\"12\">\n                        <h4> Upload Image</h4>\n                        <Row>\n                            {otherImage.map((value,key)=>(\n                                <Col lg=\"3\" key={key}>\n                                    <div className=\"img-block\">\n                                    <img\n                                        src={value.image}\n                                        className=\"img-fluid\"\n                                    />\n                                    <span role=\"button\" imgid={value._id} onClick={removeImage}>&times;</span>\n                                    </div>\n                                </Col>\n                            ))}\n                        </Row>\n                        \n                    </Col>\n                </Row>\n                \n            </div>\n        </Form>\n    </div>\n    )\n}\n"]},"metadata":{},"sourceType":"module"}