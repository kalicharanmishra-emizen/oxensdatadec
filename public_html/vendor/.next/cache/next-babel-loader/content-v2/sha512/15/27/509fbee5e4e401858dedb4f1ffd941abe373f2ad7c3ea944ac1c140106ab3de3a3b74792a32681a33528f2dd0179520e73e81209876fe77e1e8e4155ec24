{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport React, { useEffect, useState } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { Button, Col, Form, FormGroup, Input, Row } from 'reactstrap';\nimport { callApi } from '../../Helper/helper';\nimport { getProfile } from \"reducers/authSlice\";\nimport { apiFail } from '../../reducers/mainSlice';\nimport NProgress from 'nprogress';\nexport default function StoreImages(props) {\n  const dispatch = useDispatch();\n  const {\n    0: mainTemp,\n    1: setMainTemp\n  } = useState(null);\n  const {\n    0: otherTemp,\n    1: setOtherTemp\n  } = useState(null);\n  const {\n    0: mainImage,\n    1: setMainImage\n  } = useState(null);\n  const {\n    0: otherImage,\n    1: setOtherImage\n  } = useState([]);\n  useEffect(() => {\n    let mainImageRaw = props.images.find(data => {\n      return data.img_type === 'main';\n    });\n    let otherImageRaw = props.images.filter(data => {\n      return data.img_type === 'other';\n    });\n    setMainImage(mainImageRaw === undefined ? null : mainImageRaw);\n    setOtherImage(otherImageRaw);\n  }, [props.images]);\n\n  const uploadImage = async e => {\n    let formData = new FormData();\n    formData.append('type', e.target.getAttribute('datafor'));\n\n    if (e.target.getAttribute('datafor') == 'other') {\n      formData.append('image', otherTemp);\n      setOtherTemp(null);\n      document.getElementById('otherImage').value = '';\n    } else {\n      formData.append('image', mainTemp);\n      setMainTemp(null);\n      document.getElementById('mainImage').value = '';\n    } // props.setLoaderStatus(true);\n\n\n    try {\n      NProgress.start();\n      await callApi('post', '/auth/savevendorimages', formData, {\n        'Content-Type': 'multipart/form-data'\n      });\n      dispatch(getProfile());\n    } catch (e) {\n      dispatch(apiFail(e));\n    }\n  };\n\n  const mainImageChange = e => {\n    setMainTemp(e.target.files[0]);\n  };\n\n  const otherImageChange = e => {\n    setOtherTemp(e.target.files[0]);\n  };\n\n  const removeImage = async e => {\n    let imgId = e.target.getAttribute('imgid');\n\n    try {\n      NProgress.start();\n      await callApi('post', '/auth/removevendorimages', {\n        imgId: imgId\n      });\n      dispatch(getProfile());\n    } catch (e) {\n      dispatch(apiFail(e));\n    }\n  };\n\n  return /*#__PURE__*/_jsx(\"div\", {\n    className: \"profile-block\",\n    children: /*#__PURE__*/_jsx(Form, {\n      children: /*#__PURE__*/_jsx(\"div\", {\n        className: \"pl-lg-4\",\n        children: /*#__PURE__*/_jsxs(Row, {\n          children: [/*#__PURE__*/_jsx(Col, {\n            lg: \"8\",\n            children: /*#__PURE__*/_jsxs(FormGroup, {\n              children: [/*#__PURE__*/_jsx(\"label\", {\n                className: \"form-control-label\",\n                htmlFor: \"old_pass\",\n                children: \"Big Images\"\n              }), /*#__PURE__*/_jsx(Input, {\n                type: \"file\",\n                id: \"mainImage\",\n                className: \"form-control-alternative\",\n                onChange: mainImageChange\n              }), mainTemp != null ? /*#__PURE__*/_jsx(Button, {\n                className: \"btn btn-success mt-4\",\n                type: \"button\",\n                datafor: \"main\",\n                onClick: uploadImage,\n                children: \"Upload\"\n              }) : \"\"]\n            })\n          }), /*#__PURE__*/_jsxs(Col, {\n            lg: \"4\",\n            children: [/*#__PURE__*/_jsx(\"h4\", {\n              children: \"Preview Image\"\n            }), /*#__PURE__*/_jsx(\"img\", {\n              className: \"img-fluid\",\n              src: mainTemp != null ? URL.createObjectURL(mainTemp) : require('assets/img/theme/img01.jpg'),\n              alt: \"preview image\"\n            })]\n          }), /*#__PURE__*/_jsxs(Col, {\n            lg: \"12\",\n            children: [/*#__PURE__*/_jsx(\"h4\", {\n              children: \" Upload Image\"\n            }), mainImage ? /*#__PURE__*/_jsxs(\"div\", {\n              className: \"img-block\",\n              children: [/*#__PURE__*/_jsx(\"img\", {\n                src: mainImage.image,\n                className: \"img-fluid\"\n              }), /*#__PURE__*/_jsx(\"span\", {\n                role: \"button\",\n                imgid: mainImage._id,\n                onClick: removeImage,\n                children: \"\\xD7\"\n              })]\n            }) : '']\n          }), /*#__PURE__*/_jsx(Col, {\n            lg: \"8\",\n            children: /*#__PURE__*/_jsxs(FormGroup, {\n              children: [/*#__PURE__*/_jsx(\"label\", {\n                className: \"form-control-label\",\n                htmlFor: \"old_pass\",\n                children: \"Other Images\"\n              }), /*#__PURE__*/_jsx(Input, {\n                type: \"file\",\n                id: \"otherImage\",\n                className: \"form-control-alternative\",\n                onChange: otherImageChange\n              }), otherTemp != null ? /*#__PURE__*/_jsx(Button, {\n                className: \"btn btn-success mt-4\",\n                type: \"button\",\n                datafor: \"other\",\n                onClick: uploadImage,\n                children: \"Upload\"\n              }) : \"\"]\n            })\n          }), /*#__PURE__*/_jsxs(Col, {\n            lg: \"4\",\n            children: [/*#__PURE__*/_jsx(\"h4\", {\n              children: \"Preview Image\"\n            }), /*#__PURE__*/_jsx(\"img\", {\n              className: \"img-fluid\",\n              src: otherTemp != null ? URL.createObjectURL(otherTemp) : require('assets/img/theme/img01.jpg'),\n              alt: \"preview image\"\n            })]\n          }), /*#__PURE__*/_jsxs(Col, {\n            lg: \"12\",\n            children: [/*#__PURE__*/_jsx(\"h4\", {\n              children: \" Upload Image\"\n            }), /*#__PURE__*/_jsx(Row, {\n              children: otherImage.map((value, key) => /*#__PURE__*/_jsx(Col, {\n                lg: \"3\",\n                children: /*#__PURE__*/_jsxs(\"div\", {\n                  className: \"img-block\",\n                  children: [/*#__PURE__*/_jsx(\"img\", {\n                    src: value.image,\n                    className: \"img-fluid\"\n                  }), /*#__PURE__*/_jsx(\"span\", {\n                    role: \"button\",\n                    imgid: value._id,\n                    onClick: removeImage,\n                    children: \"\\xD7\"\n                  })]\n                })\n              }, key))\n            })]\n          })]\n        })\n      })\n    })\n  });\n}","map":null,"metadata":{},"sourceType":"module"}