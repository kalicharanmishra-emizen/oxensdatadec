{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _regeneratorRuntime from \"/var/www/domains/oxens.ezxdemo.com/public_html/vendor/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/var/www/domains/oxens.ezxdemo.com/public_html/vendor/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport React, { useEffect, useState } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { Button, Col, Form, FormGroup, Input, Row } from 'reactstrap';\nimport { callApi } from '../../Helper/helper';\nimport { getProfile } from \"reducers/authSlice\";\nimport { apiFail } from '../../reducers/mainSlice';\nimport NProgress from 'nprogress';\nexport default function StoreImages(props) {\n  var dispatch = useDispatch();\n\n  var _useState = useState(null),\n      mainTemp = _useState[0],\n      setMainTemp = _useState[1];\n\n  var _useState2 = useState(null),\n      otherTemp = _useState2[0],\n      setOtherTemp = _useState2[1];\n\n  var _useState3 = useState(null),\n      mainImage = _useState3[0],\n      setMainImage = _useState3[1];\n\n  var _useState4 = useState([]),\n      otherImage = _useState4[0],\n      setOtherImage = _useState4[1];\n\n  useEffect(function () {\n    var mainImageRaw = props.images.find(function (data) {\n      return data.img_type === 'main';\n    });\n    var otherImageRaw = props.images.filter(function (data) {\n      return data.img_type === 'other';\n    });\n    setMainImage(mainImageRaw === undefined ? null : mainImageRaw);\n    setOtherImage(otherImageRaw);\n  }, [props.images]);\n\n  var uploadImage = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(e) {\n      var formData;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              formData = new FormData();\n              formData.append('type', e.target.getAttribute('datafor'));\n\n              if (e.target.getAttribute('datafor') == 'other') {\n                formData.append('image', otherTemp);\n                setOtherTemp(null);\n                document.getElementById('otherImage').value = '';\n              } else {\n                formData.append('image', mainTemp);\n                setMainTemp(null);\n                document.getElementById('mainImage').value = '';\n              } // props.setLoaderStatus(true);\n\n\n              _context.prev = 3;\n              NProgress.start();\n              _context.next = 7;\n              return callApi('post', '/auth/savevendorimages', formData, {\n                'Content-Type': 'multipart/form-data'\n              });\n\n            case 7:\n              dispatch(getProfile());\n              _context.next = 13;\n              break;\n\n            case 10:\n              _context.prev = 10;\n              _context.t0 = _context[\"catch\"](3);\n              dispatch(apiFail(_context.t0));\n\n            case 13:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[3, 10]]);\n    }));\n\n    return function uploadImage(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var mainImageChange = function mainImageChange(e) {\n    setMainTemp(e.target.files[0]);\n  };\n\n  var otherImageChange = function otherImageChange(e) {\n    setOtherTemp(e.target.files[0]);\n  };\n\n  var removeImage = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e) {\n      var imgId;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              imgId = e.target.getAttribute('imgid');\n              _context2.prev = 1;\n              NProgress.start();\n              _context2.next = 5;\n              return callApi('post', '/auth/removevendorimages', {\n                imgId: imgId\n              });\n\n            case 5:\n              dispatch(getProfile());\n              _context2.next = 11;\n              break;\n\n            case 8:\n              _context2.prev = 8;\n              _context2.t0 = _context2[\"catch\"](1);\n              dispatch(apiFail(_context2.t0));\n\n            case 11:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[1, 8]]);\n    }));\n\n    return function removeImage(_x2) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/_jsx(\"div\", {\n    className: \"profile-block\",\n    children: /*#__PURE__*/_jsx(Form, {\n      children: /*#__PURE__*/_jsx(\"div\", {\n        className: \"pl-lg-4\",\n        children: /*#__PURE__*/_jsxs(Row, {\n          children: [/*#__PURE__*/_jsx(Col, {\n            lg: \"8\",\n            children: /*#__PURE__*/_jsxs(FormGroup, {\n              children: [/*#__PURE__*/_jsx(\"label\", {\n                className: \"form-control-label\",\n                htmlFor: \"old_pass\",\n                children: \"Big Images\"\n              }), /*#__PURE__*/_jsx(Input, {\n                type: \"file\",\n                id: \"mainImage\",\n                className: \"form-control-alternative\",\n                onChange: mainImageChange\n              }), mainTemp != null ? /*#__PURE__*/_jsx(Button, {\n                className: \"btn btn-success mt-4\",\n                type: \"button\",\n                datafor: \"main\",\n                onClick: uploadImage,\n                children: \"Upload\"\n              }) : \"\"]\n            })\n          }), /*#__PURE__*/_jsxs(Col, {\n            lg: \"4\",\n            children: [/*#__PURE__*/_jsx(\"h4\", {\n              children: \"Preview Image\"\n            }), /*#__PURE__*/_jsx(\"img\", {\n              className: \"img-fluid\",\n              src: mainTemp != null ? URL.createObjectURL(mainTemp) : require('assets/img/theme/img01.jpg'),\n              alt: \"preview image\"\n            })]\n          }), /*#__PURE__*/_jsxs(Col, {\n            lg: \"12\",\n            children: [/*#__PURE__*/_jsx(\"h4\", {\n              children: \" Upload Image\"\n            }), mainImage ? /*#__PURE__*/_jsxs(\"div\", {\n              className: \"img-block\",\n              children: [/*#__PURE__*/_jsx(\"img\", {\n                src: mainImage.image,\n                className: \"img-fluid\"\n              }), /*#__PURE__*/_jsx(\"span\", {\n                role: \"button\",\n                imgid: mainImage._id,\n                onClick: removeImage,\n                children: \"\\xD7\"\n              })]\n            }) : '']\n          }), /*#__PURE__*/_jsx(Col, {\n            lg: \"8\",\n            children: /*#__PURE__*/_jsxs(FormGroup, {\n              children: [/*#__PURE__*/_jsx(\"label\", {\n                className: \"form-control-label\",\n                htmlFor: \"old_pass\",\n                children: \"Other Images\"\n              }), /*#__PURE__*/_jsx(Input, {\n                type: \"file\",\n                id: \"otherImage\",\n                className: \"form-control-alternative\",\n                onChange: otherImageChange\n              }), otherTemp != null ? /*#__PURE__*/_jsx(Button, {\n                className: \"btn btn-success mt-4\",\n                type: \"button\",\n                datafor: \"other\",\n                onClick: uploadImage,\n                children: \"Upload\"\n              }) : \"\"]\n            })\n          }), /*#__PURE__*/_jsxs(Col, {\n            lg: \"4\",\n            children: [/*#__PURE__*/_jsx(\"h4\", {\n              children: \"Preview Image\"\n            }), /*#__PURE__*/_jsx(\"img\", {\n              className: \"img-fluid\",\n              src: otherTemp != null ? URL.createObjectURL(otherTemp) : require('assets/img/theme/img01.jpg'),\n              alt: \"preview image\"\n            })]\n          }), /*#__PURE__*/_jsxs(Col, {\n            lg: \"12\",\n            children: [/*#__PURE__*/_jsx(\"h4\", {\n              children: \" Upload Image\"\n            }), /*#__PURE__*/_jsx(Row, {\n              children: otherImage.map(function (value, key) {\n                return /*#__PURE__*/_jsx(Col, {\n                  lg: \"3\",\n                  children: /*#__PURE__*/_jsxs(\"div\", {\n                    className: \"img-block\",\n                    children: [/*#__PURE__*/_jsx(\"img\", {\n                      src: value.image,\n                      className: \"img-fluid\"\n                    }), /*#__PURE__*/_jsx(\"span\", {\n                      role: \"button\",\n                      imgid: value._id,\n                      onClick: removeImage,\n                      children: \"\\xD7\"\n                    })]\n                  })\n                }, key);\n              })\n            })]\n          })]\n        })\n      })\n    })\n  });\n}","map":null,"metadata":{},"sourceType":"module"}