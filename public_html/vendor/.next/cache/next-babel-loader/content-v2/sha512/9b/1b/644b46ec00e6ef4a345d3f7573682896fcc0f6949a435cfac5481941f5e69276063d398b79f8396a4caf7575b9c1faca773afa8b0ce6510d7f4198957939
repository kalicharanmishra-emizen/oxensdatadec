{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/var/www/domains/oxens.ezxdemo.com/public_html/vendor/components/Profile/StoreImages.js\";\nimport React, { useEffect, useState } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { Button, Col, Form, FormGroup, Input, Row } from 'reactstrap';\nimport { callApi } from '../../Helper/helper';\nimport { getProfile } from \"reducers/authSlice\";\nimport { apiFail } from '../../reducers/mainSlice';\nimport NProgress from 'nprogress';\nexport default function StoreImages(props) {\n  const dispatch = useDispatch();\n  const {\n    0: mainTemp,\n    1: setMainTemp\n  } = useState(null);\n  const {\n    0: otherTemp,\n    1: setOtherTemp\n  } = useState(null);\n  const {\n    0: mainImage,\n    1: setMainImage\n  } = useState(null);\n  const {\n    0: otherImage,\n    1: setOtherImage\n  } = useState([]);\n  useEffect(() => {\n    let mainImageRaw = props.images.find(data => {\n      return data.img_type === 'main';\n    });\n    let otherImageRaw = props.images.filter(data => {\n      return data.img_type === 'other';\n    });\n    setMainImage(mainImageRaw === undefined ? null : mainImageRaw);\n    setOtherImage(otherImageRaw);\n  }, [props.images]);\n\n  const uploadImage = async e => {\n    let formData = new FormData();\n    formData.append('type', e.target.getAttribute('datafor'));\n\n    if (e.target.getAttribute('datafor') == 'other') {\n      formData.append('image', otherTemp);\n      setOtherTemp(null);\n      document.getElementById('otherImage').value = '';\n    } else {\n      formData.append('image', mainTemp);\n      setMainTemp(null);\n      document.getElementById('mainImage').value = '';\n    } // props.setLoaderStatus(true);\n\n\n    try {\n      NProgress.start();\n      await callApi('post', '/auth/savevendorimages', formData, {\n        'Content-Type': 'multipart/form-data'\n      });\n      dispatch(getProfile());\n    } catch (e) {\n      dispatch(apiFail(e));\n    }\n  };\n\n  const mainImageChange = e => {\n    setMainTemp(e.target.files[0]);\n  };\n\n  const otherImageChange = e => {\n    setOtherTemp(e.target.files[0]);\n  };\n\n  const removeImage = async e => {\n    let imgId = e.target.getAttribute('imgid');\n\n    try {\n      NProgress.start();\n      await callApi('post', '/auth/removevendorimages', {\n        imgId: imgId\n      });\n      dispatch(getProfile());\n    } catch (e) {\n      dispatch(apiFail(e));\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"profile-block\",\n    children: /*#__PURE__*/_jsxDEV(Form, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"pl-lg-4\",\n        children: /*#__PURE__*/_jsxDEV(Row, {\n          children: [/*#__PURE__*/_jsxDEV(Col, {\n            lg: \"8\",\n            children: /*#__PURE__*/_jsxDEV(FormGroup, {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"form-control-label\",\n                htmlFor: \"old_pass\",\n                children: \"Big Images\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 71,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(Input, {\n                type: \"file\",\n                id: \"mainImage\",\n                className: \"form-control-alternative\",\n                onChange: mainImageChange\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 77,\n                columnNumber: 29\n              }, this), mainTemp != null ? /*#__PURE__*/_jsxDEV(Button, {\n                className: \"btn btn-success mt-4\",\n                type: \"button\",\n                datafor: \"main\",\n                onClick: uploadImage,\n                children: \"Upload\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 85,\n                columnNumber: 37\n              }, this) : \"\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 70,\n              columnNumber: 25\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 69,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(Col, {\n            lg: \"4\",\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              children: \"Preview Image\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 98,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n              className: \"img-fluid\",\n              src: mainTemp != null ? URL.createObjectURL(mainTemp) : require('assets/img/theme/img01.jpg'),\n              alt: \"preview image\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 101,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(Col, {\n            lg: \"12\",\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              children: \" Upload Image\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 108,\n              columnNumber: 25\n            }, this), mainImage ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"img-block\",\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                src: mainImage.image,\n                className: \"img-fluid\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 111,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                role: \"button\",\n                imgid: mainImage._id,\n                onClick: removeImage,\n                children: \"\\xD7\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 115,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 110,\n              columnNumber: 29\n            }, this) : '']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(Col, {\n            lg: \"8\",\n            children: /*#__PURE__*/_jsxDEV(FormGroup, {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"form-control-label\",\n                htmlFor: \"old_pass\",\n                children: \"Other Images\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 126,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(Input, {\n                type: \"file\",\n                id: \"otherImage\",\n                className: \"form-control-alternative\",\n                onChange: otherImageChange\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 132,\n                columnNumber: 29\n              }, this), otherTemp != null ? /*#__PURE__*/_jsxDEV(Button, {\n                className: \"btn btn-success mt-4\",\n                type: \"button\",\n                datafor: \"other\",\n                onClick: uploadImage,\n                children: \"Upload\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 139,\n                columnNumber: 37\n              }, this) : \"\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 125,\n              columnNumber: 25\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 124,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(Col, {\n            lg: \"4\",\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              children: \"Preview Image\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 152,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n              className: \"img-fluid\",\n              src: otherTemp != null ? URL.createObjectURL(otherTemp) : require('assets/img/theme/img01.jpg'),\n              alt: \"preview image\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 155,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 151,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(Col, {\n            lg: \"12\",\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              children: \" Upload Image\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 162,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(Row, {\n              children: otherImage.map((value, key) => /*#__PURE__*/_jsxDEV(Col, {\n                lg: \"3\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"img-block\",\n                  children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                    src: value.image,\n                    className: \"img-fluid\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 167,\n                    columnNumber: 37\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    role: \"button\",\n                    imgid: value._id,\n                    onClick: removeImage,\n                    children: \"\\xD7\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 171,\n                    columnNumber: 37\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 166,\n                  columnNumber: 37\n                }, this)\n              }, key, false, {\n                fileName: _jsxFileName,\n                lineNumber: 165,\n                columnNumber: 33\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 163,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 161,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 65,\n    columnNumber: 9\n  }, this);\n}","map":{"version":3,"sources":["/var/www/domains/oxens.ezxdemo.com/public_html/vendor/components/Profile/StoreImages.js"],"names":["React","useEffect","useState","useDispatch","Button","Col","Form","FormGroup","Input","Row","callApi","getProfile","apiFail","NProgress","StoreImages","props","dispatch","mainTemp","setMainTemp","otherTemp","setOtherTemp","mainImage","setMainImage","otherImage","setOtherImage","mainImageRaw","images","find","data","img_type","otherImageRaw","filter","undefined","uploadImage","e","formData","FormData","append","target","getAttribute","document","getElementById","value","start","mainImageChange","files","otherImageChange","removeImage","imgId","URL","createObjectURL","require","image","_id","map","key"],"mappings":";;AAAA,OAAOA,KAAP,IAAeC,SAAf,EAA0BC,QAA1B,QAAyC,OAAzC;AACA,SAASC,WAAT,QAA4B,aAA5B;AACA,SAASC,MAAT,EAAiBC,GAAjB,EAAsBC,IAAtB,EAA4BC,SAA5B,EAAuCC,KAAvC,EAA8CC,GAA9C,QAAyD,YAAzD;AACA,SAASC,OAAT,QAAwB,qBAAxB;AACA,SAASC,UAAT,QAA2B,oBAA3B;AACA,SAASC,OAAT,QAAwB,0BAAxB;AACA,OAAOC,SAAP,MAAsB,WAAtB;AACA,eAAe,SAASC,WAAT,CAAqBC,KAArB,EAA4B;AACvC,QAAMC,QAAQ,GAAGb,WAAW,EAA5B;AACA,QAAM;AAAA,OAACc,QAAD;AAAA,OAAWC;AAAX,MAA0BhB,QAAQ,CAAC,IAAD,CAAxC;AACA,QAAM;AAAA,OAACiB,SAAD;AAAA,OAAYC;AAAZ,MAA4BlB,QAAQ,CAAC,IAAD,CAA1C;AACA,QAAM;AAAA,OAACmB,SAAD;AAAA,OAAYC;AAAZ,MAA4BpB,QAAQ,CAAC,IAAD,CAA1C;AACA,QAAM;AAAA,OAACqB,UAAD;AAAA,OAAaC;AAAb,MAA8BtB,QAAQ,CAAC,EAAD,CAA5C;AACAD,EAAAA,SAAS,CAAC,MAAM;AACZ,QAAIwB,YAAY,GAAGV,KAAK,CAACW,MAAN,CAAaC,IAAb,CAAkBC,IAAI,IAAE;AACvC,aAAOA,IAAI,CAACC,QAAL,KAAgB,MAAvB;AACH,KAFkB,CAAnB;AAGA,QAAIC,aAAa,GAAGf,KAAK,CAACW,MAAN,CAAaK,MAAb,CAAoBH,IAAI,IAAE;AAC1C,aAAOA,IAAI,CAACC,QAAL,KAAgB,OAAvB;AACH,KAFmB,CAApB;AAGAP,IAAAA,YAAY,CAAEG,YAAY,KAAKO,SAAlB,GAA6B,IAA7B,GAAkCP,YAAnC,CAAZ;AACAD,IAAAA,aAAa,CAACM,aAAD,CAAb;AACH,GATQ,EASN,CAACf,KAAK,CAACW,MAAP,CATM,CAAT;;AAWA,QAAMO,WAAW,GAAG,MAAOC,CAAP,IAAY;AAC5B,QAAIC,QAAQ,GAAG,IAAIC,QAAJ,EAAf;AACAD,IAAAA,QAAQ,CAACE,MAAT,CAAgB,MAAhB,EAAuBH,CAAC,CAACI,MAAF,CAASC,YAAT,CAAsB,SAAtB,CAAvB;;AACA,QAAGL,CAAC,CAACI,MAAF,CAASC,YAAT,CAAsB,SAAtB,KAAoC,OAAvC,EAA+C;AAC3CJ,MAAAA,QAAQ,CAACE,MAAT,CAAgB,OAAhB,EAAwBlB,SAAxB;AACAC,MAAAA,YAAY,CAAC,IAAD,CAAZ;AACAoB,MAAAA,QAAQ,CAACC,cAAT,CAAwB,YAAxB,EAAsCC,KAAtC,GAA6C,EAA7C;AACH,KAJD,MAIK;AACDP,MAAAA,QAAQ,CAACE,MAAT,CAAgB,OAAhB,EAAwBpB,QAAxB;AACAC,MAAAA,WAAW,CAAC,IAAD,CAAX;AACAsB,MAAAA,QAAQ,CAACC,cAAT,CAAwB,WAAxB,EAAqCC,KAArC,GAA4C,EAA5C;AACH,KAX2B,CAY5B;;;AACA,QAAI;AACA7B,MAAAA,SAAS,CAAC8B,KAAV;AACA,YAAMjC,OAAO,CAAC,MAAD,EAAQ,wBAAR,EAAiCyB,QAAjC,EAA0C;AAAC,wBAAgB;AAAjB,OAA1C,CAAb;AACAnB,MAAAA,QAAQ,CAACL,UAAU,EAAX,CAAR;AACH,KAJD,CAIE,OAAOuB,CAAP,EAAU;AACRlB,MAAAA,QAAQ,CAACJ,OAAO,CAACsB,CAAD,CAAR,CAAR;AACH;AAGJ,GAtBD;;AAuBA,QAAMU,eAAe,GAAIV,CAAD,IAAM;AAC1BhB,IAAAA,WAAW,CAACgB,CAAC,CAACI,MAAF,CAASO,KAAT,CAAe,CAAf,CAAD,CAAX;AACH,GAFD;;AAGA,QAAMC,gBAAgB,GAAIZ,CAAD,IAAM;AAC3Bd,IAAAA,YAAY,CAACc,CAAC,CAACI,MAAF,CAASO,KAAT,CAAe,CAAf,CAAD,CAAZ;AACH,GAFD;;AAGA,QAAME,WAAW,GAAG,MAAOb,CAAP,IAAa;AAC7B,QAAIc,KAAK,GAAGd,CAAC,CAACI,MAAF,CAASC,YAAT,CAAsB,OAAtB,CAAZ;;AACA,QAAI;AACA1B,MAAAA,SAAS,CAAC8B,KAAV;AACA,YAAMjC,OAAO,CAAC,MAAD,EAAQ,0BAAR,EAAmC;AAACsC,QAAAA,KAAK,EAACA;AAAP,OAAnC,CAAb;AACAhC,MAAAA,QAAQ,CAACL,UAAU,EAAX,CAAR;AACH,KAJD,CAIE,OAAOuB,CAAP,EAAU;AACRlB,MAAAA,QAAQ,CAACJ,OAAO,CAACsB,CAAD,CAAR,CAAR;AACH;AACJ,GATD;;AAUA,sBACI;AAAK,IAAA,SAAS,EAAC,eAAf;AAAA,2BACA,QAAC,IAAD;AAAA,6BACI;AAAK,QAAA,SAAS,EAAC,SAAf;AAAA,+BACI,QAAC,GAAD;AAAA,kCACI,QAAC,GAAD;AAAK,YAAA,EAAE,EAAC,GAAR;AAAA,mCACI,QAAC,SAAD;AAAA,sCACI;AACI,gBAAA,SAAS,EAAC,oBADd;AAEI,gBAAA,OAAO,EAAC,UAFZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADJ,eAOI,QAAC,KAAD;AACI,gBAAA,IAAI,EAAC,MADT;AAEI,gBAAA,EAAE,EAAC,WAFP;AAGI,gBAAA,SAAS,EAAC,0BAHd;AAII,gBAAA,QAAQ,EAAEU;AAJd;AAAA;AAAA;AAAA;AAAA,sBAPJ,EAcM3B,QAAQ,IAAI,IAAb,gBACO,QAAC,MAAD;AACI,gBAAA,SAAS,EAAC,sBADd;AAEI,gBAAA,IAAI,EAAC,QAFT;AAGI,gBAAA,OAAO,EAAC,MAHZ;AAII,gBAAA,OAAO,EAAEgB,WAJb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADP,GASI,EAvBT;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,kBADJ,eA6BI,QAAC,GAAD;AAAK,YAAA,EAAE,EAAC,GAAR;AAAA,oCACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADJ,eAII;AACI,cAAA,SAAS,EAAC,WADd;AAEI,cAAA,GAAG,EAAGhB,QAAQ,IAAI,IAAb,GAAmBgC,GAAG,CAACC,eAAJ,CAAoBjC,QAApB,CAAnB,GAAiDkC,OAAO,CAAC,4BAAD,CAFjE;AAGI,cAAA,GAAG,EAAC;AAHR;AAAA;AAAA;AAAA;AAAA,oBAJJ;AAAA;AAAA;AAAA;AAAA;AAAA,kBA7BJ,eAuCI,QAAC,GAAD;AAAK,YAAA,EAAE,EAAC,IAAR;AAAA,oCACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADJ,EAEK9B,SAAS,gBACN;AAAK,cAAA,SAAS,EAAC,WAAf;AAAA,sCACI;AACI,gBAAA,GAAG,EAAEA,SAAS,CAAC+B,KADnB;AAEI,gBAAA,SAAS,EAAC;AAFd;AAAA;AAAA;AAAA;AAAA,sBADJ,eAKI;AAAM,gBAAA,IAAI,EAAC,QAAX;AAAoB,gBAAA,KAAK,EAAE/B,SAAS,CAACgC,GAArC;AAA0C,gBAAA,OAAO,EAAEN,WAAnD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBALJ;AAAA;AAAA;AAAA;AAAA;AAAA,oBADM,GASV,EAXJ;AAAA;AAAA;AAAA;AAAA;AAAA,kBAvCJ,eAwDI,QAAC,GAAD;AAAK,YAAA,EAAE,EAAC,GAAR;AAAA,mCACI,QAAC,SAAD;AAAA,sCACI;AACI,gBAAA,SAAS,EAAC,oBADd;AAEI,gBAAA,OAAO,EAAC,UAFZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADJ,eAOI,QAAC,KAAD;AACI,gBAAA,IAAI,EAAC,MADT;AAEI,gBAAA,EAAE,EAAC,YAFP;AAGI,gBAAA,SAAS,EAAC,0BAHd;AAII,gBAAA,QAAQ,EAAED;AAJd;AAAA;AAAA;AAAA;AAAA,sBAPJ,EAaM3B,SAAS,IAAI,IAAd,gBACO,QAAC,MAAD;AACI,gBAAA,SAAS,EAAC,sBADd;AAEI,gBAAA,IAAI,EAAC,QAFT;AAGI,gBAAA,OAAO,EAAC,OAHZ;AAII,gBAAA,OAAO,EAAEc,WAJb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADP,GASI,EAtBT;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,kBAxDJ,eAmFI,QAAC,GAAD;AAAK,YAAA,EAAE,EAAC,GAAR;AAAA,oCACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADJ,eAII;AACI,cAAA,SAAS,EAAC,WADd;AAEI,cAAA,GAAG,EAAGd,SAAS,IAAI,IAAd,GAAoB8B,GAAG,CAACC,eAAJ,CAAoB/B,SAApB,CAApB,GAAmDgC,OAAO,CAAC,4BAAD,CAFnE;AAGI,cAAA,GAAG,EAAC;AAHR;AAAA;AAAA;AAAA;AAAA,oBAJJ;AAAA;AAAA;AAAA;AAAA;AAAA,kBAnFJ,eA6FI,QAAC,GAAD;AAAK,YAAA,EAAE,EAAC,IAAR;AAAA,oCACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADJ,eAEI,QAAC,GAAD;AAAA,wBACK5B,UAAU,CAAC+B,GAAX,CAAe,CAACZ,KAAD,EAAOa,GAAP,kBACZ,QAAC,GAAD;AAAK,gBAAA,EAAE,EAAC,GAAR;AAAA,uCACI;AAAK,kBAAA,SAAS,EAAC,WAAf;AAAA,0CACA;AACI,oBAAA,GAAG,EAAEb,KAAK,CAACU,KADf;AAEI,oBAAA,SAAS,EAAC;AAFd;AAAA;AAAA;AAAA;AAAA,0BADA,eAKA;AAAM,oBAAA,IAAI,EAAC,QAAX;AAAoB,oBAAA,KAAK,EAAEV,KAAK,CAACW,GAAjC;AAAsC,oBAAA,OAAO,EAAEN,WAA/C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BALA;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ,iBAAiBQ,GAAjB;AAAA;AAAA;AAAA;AAAA,sBADH;AADL;AAAA;AAAA;AAAA;AAAA,oBAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,kBA7FJ;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA,UADJ;AAwHH","sourcesContent":["import React,{ useEffect, useState }from 'react'\nimport { useDispatch } from 'react-redux'\nimport { Button, Col, Form, FormGroup, Input, Row } from 'reactstrap'\nimport { callApi } from '../../Helper/helper';\nimport { getProfile } from \"reducers/authSlice\";\nimport { apiFail } from '../../reducers/mainSlice';\nimport NProgress from 'nprogress';\nexport default function StoreImages(props) {\n    const dispatch = useDispatch()\n    const [mainTemp, setMainTemp] = useState(null)\n    const [otherTemp, setOtherTemp] = useState(null)\n    const [mainImage, setMainImage] = useState(null)\n    const [otherImage, setOtherImage] = useState([])\n    useEffect(() => {\n        let mainImageRaw = props.images.find(data=>{\n            return data.img_type==='main'\n        })\n        let otherImageRaw = props.images.filter(data=>{\n            return data.img_type==='other'\n        })\n        setMainImage((mainImageRaw === undefined)?null:mainImageRaw);\n        setOtherImage(otherImageRaw)\n    }, [props.images])\n\n    const uploadImage = async (e) =>{\n        let formData = new FormData();\n        formData.append('type',e.target.getAttribute('datafor'))\n        if(e.target.getAttribute('datafor') == 'other'){\n            formData.append('image',otherTemp)\n            setOtherTemp(null);\n            document.getElementById('otherImage').value =''\n        }else{\n            formData.append('image',mainTemp)\n            setMainTemp(null);\n            document.getElementById('mainImage').value =''\n        }\n        // props.setLoaderStatus(true);\n        try {\n            NProgress.start()\n            await callApi('post','/auth/savevendorimages',formData,{'Content-Type': 'multipart/form-data'});\n            dispatch(getProfile())\n        } catch (e) {\n            dispatch(apiFail(e))\n        }\n        \n        \n    }\n    const mainImageChange = (e) =>{\n        setMainTemp(e.target.files[0])\n    }\n    const otherImageChange = (e) =>{\n        setOtherTemp(e.target.files[0])\n    }\n    const removeImage = async (e) => {\n        let imgId = e.target.getAttribute('imgid');\n        try {\n            NProgress.start()\n            await callApi('post','/auth/removevendorimages',{imgId:imgId});\n            dispatch(getProfile())  \n        } catch (e) {\n            dispatch(apiFail(e))\n        }\n    }\n    return (\n        <div className=\"profile-block\">\n        <Form>\n            <div className=\"pl-lg-4\">\n                <Row>\n                    <Col lg=\"8\">\n                        <FormGroup>\n                            <label\n                                className=\"form-control-label\"\n                                htmlFor=\"old_pass\"\n                            >\n                                Big Images\n                            </label>\n                            <Input\n                                type=\"file\"\n                                id=\"mainImage\"\n                                className=\"form-control-alternative\"\n                                onChange={mainImageChange}\n                            />\n\n                            {(mainTemp != null)?\n                                    <Button\n                                        className=\"btn btn-success mt-4\"\n                                        type=\"button\"\n                                        datafor=\"main\"\n                                        onClick={uploadImage}\n                                    >\n                                        Upload    \n                                    </Button>\n                                :\"\"\n                            }\n                        </FormGroup>\n                    </Col>\n                    <Col lg=\"4\">\n                        <h4>\n                            Preview Image\n                        </h4>\n                        <img\n                            className=\"img-fluid\"\n                            src={(mainTemp != null)?URL.createObjectURL(mainTemp):require('assets/img/theme/img01.jpg')}\n                            alt=\"preview image\"\n                        />\n                    </Col>\n                    <Col lg=\"12\">\n                        <h4> Upload Image</h4>\n                        {mainImage?\n                            <div className=\"img-block\">\n                                <img\n                                    src={mainImage.image}\n                                    className=\"img-fluid\"\n                                />\n                                <span role=\"button\" imgid={mainImage._id} onClick={removeImage}>&times;</span>\n                            </div>\n                        :\n                        ''\n                        }\n                        \n                    </Col>\n\n\n                    <Col lg=\"8\">\n                        <FormGroup>\n                            <label\n                                className=\"form-control-label\"\n                                htmlFor=\"old_pass\"\n                            >\n                                Other Images\n                            </label>\n                            <Input\n                                type=\"file\"\n                                id=\"otherImage\"\n                                className=\"form-control-alternative\"\n                                onChange={otherImageChange}\n                            />\n                            {(otherTemp != null)?\n                                    <Button\n                                        className=\"btn btn-success mt-4\"\n                                        type=\"button\"\n                                        datafor=\"other\"\n                                        onClick={uploadImage}\n                                    >\n                                        Upload    \n                                    </Button>\n                                :\"\"\n                            }\n                        </FormGroup>\n                    </Col>\n                    <Col lg=\"4\">\n                        <h4>\n                            Preview Image\n                        </h4>\n                        <img\n                            className=\"img-fluid\"\n                            src={(otherTemp != null)?URL.createObjectURL(otherTemp):require('assets/img/theme/img01.jpg')}\n                            alt=\"preview image\"\n                        />\n                    </Col>\n                    <Col lg=\"12\">\n                        <h4> Upload Image</h4>\n                        <Row>\n                            {otherImage.map((value,key)=>(\n                                <Col lg=\"3\" key={key}>\n                                    <div className=\"img-block\">\n                                    <img\n                                        src={value.image}\n                                        className=\"img-fluid\"\n                                    />\n                                    <span role=\"button\" imgid={value._id} onClick={removeImage}>&times;</span>\n                                    </div>\n                                </Col>\n                            ))}\n                        </Row>\n                        \n                    </Col>\n                </Row>\n                \n            </div>\n        </Form>\n    </div>\n    )\n}\n"]},"metadata":{},"sourceType":"module"}