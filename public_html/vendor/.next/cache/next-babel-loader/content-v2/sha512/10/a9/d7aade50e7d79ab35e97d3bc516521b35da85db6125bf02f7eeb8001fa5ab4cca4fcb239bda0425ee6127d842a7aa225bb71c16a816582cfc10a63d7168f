{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport React, { useCallback, useEffect, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { debounce } from \"lodash\";\nimport \"../../styles/store-detail.css\";\nimport POSuser from \"../Model/POSuser\";\nimport { Input } from \"reactstrap\";\nimport { getPOSusers } from \"../../reducers/mainSlice\";\n\nconst posUserComponent = props => {\n  var _storeDetail$data;\n\n  const dispatch = useDispatch();\n  const POSusers = useSelector(state => state.mainSlice.POSuser);\n  const storeDetail = useSelector(state => state.storeSlice.storeDetail);\n  const {\n    0: inputBox,\n    1: setInputBox\n  } = useState(true);\n  const {\n    0: searchUser,\n    1: setSearchUser\n  } = useState(\"\");\n  const {\n    0: suggestionModel,\n    1: setSuggestionModel\n  } = useState(false);\n  const {\n    0: selectUser,\n    1: setSelectUser\n  } = useState(null);\n  const {\n    0: userFormModal,\n    1: setUserFormModal\n  } = useState(false);\n\n  const userFormToggle = () => {\n    setUserFormModal(!userFormModal);\n  };\n\n  const handelStatus = () => {\n    setInputBox(false);\n    setSuggestionModel(false);\n  };\n\n  const getTempUser = data => {\n    setSelectUser(data);\n    setInputBox(false);\n    setSuggestionModel(false);\n  };\n\n  const clearAllStates = () => {\n    setSelectUser(null);\n    setInputBox(true);\n    setSearchUser(\"\");\n  };\n\n  const debounceLoad = useCallback(debounce(value => {\n    if (value != \"\" && value.length > 2) {\n      dispatch(getPOSusers({\n        text: value\n      }));\n      setSuggestionModel(true); // autoComplete.getQueryPredictions({ input: value }, displaySuggestions);\n    } else if (value == \"\") {\n      setSuggestionModel(false);\n      dispatch(getPOSusers({\n        text: value\n      }));\n    }\n  }, 700), []);\n  useEffect(() => {\n    if (props.isReset) {\n      clearAllStates();\n      props.handelisReset(false);\n    }\n\n    props.handelPOSUser(selectUser);\n  }, [selectUser, props.isReset]);\n  console.log(\"is selectUser\", selectUser);\n  return /*#__PURE__*/_jsxs(\"section\", {\n    children: [/*#__PURE__*/_jsx(\"div\", {\n      children: inputBox ? /*#__PURE__*/_jsxs(_Fragment, {\n        children: [/*#__PURE__*/_jsx(Input, {\n          type: \"text\",\n          className: \"search\",\n          value: searchUser,\n          placeholder: \"Please Enter Mobile No\",\n          onChange: e => {\n            setSearchUser(e.target.value);\n            debounceLoad(e.target.value);\n          }\n        }), searchUser ? /*#__PURE__*/_jsx(\"div\", {\n          className: \"bg-close\",\n          onClick: () => {\n            setSearchUser(\"\");\n            setSuggestionModel(false);\n          }\n        }) : \"\"]\n      }) : /*#__PURE__*/_jsxs(\"div\", {\n        className: \"selecetdInputBox\",\n        children: [selectUser === null || selectUser === void 0 ? void 0 : selectUser.value, /*#__PURE__*/_jsx(\"div\", {\n          style: {\n            marginTop: \"0px\"\n          },\n          className: \"bg-close\",\n          onClick: () => {\n            setInputBox(true);\n            setSearchUser(\"\");\n            setSelectUser(null);\n          }\n        })]\n      })\n    }), suggestionModel ? /*#__PURE__*/_jsx(\"div\", {\n      className: \"suggestions\",\n      children: /*#__PURE__*/_jsx(\"ul\", {\n        children: POSusers.length > 0 ? POSusers.map(item => /*#__PURE__*/_jsx(\"li\", {\n          children: /*#__PURE__*/_jsx(\"div\", {\n            style: {\n              textTransform: \"capitalize\"\n            },\n            onClick: () => {\n              handelStatus();\n              setSelectUser({\n                key: item._id,\n                value: `${item.name} (${item.phoneNo})`,\n                phoneno: item.phoneNo\n              });\n            },\n            children: `${item.name} (${item.phoneNo})`\n          })\n        }, item._id)) : /*#__PURE__*/_jsx(\"li\", {\n          className: \"createUserBtn_0\",\n          children: /*#__PURE__*/_jsx(\"div\", {\n            onClick: () => setUserFormModal(!userFormModal),\n            children: \"create user\"\n          })\n        })\n      })\n    }) : \"\", /*#__PURE__*/_jsx(POSuser, {\n      isOpen: userFormModal,\n      toggle: userFormToggle,\n      itemId: searchUser,\n      storeId: storeDetail === null || storeDetail === void 0 ? void 0 : (_storeDetail$data = storeDetail.data) === null || _storeDetail$data === void 0 ? void 0 : _storeDetail$data._id,\n      getTempUser: getTempUser\n    })]\n  });\n};\n\nexport default posUserComponent;","map":null,"metadata":{},"sourceType":"module"}