{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport Vendor from \"layouts/Vendor\";\nimport UserHeader from \"components/Headers/UserHeader\";\nimport { Button, Card, CardBody, CardHeader, Col, Container, Form, FormGroup, Row } from \"reactstrap\";\nimport { Formik } from \"formik\";\nimport * as Yup from 'yup';\nimport { useDispatch, useSelector } from \"react-redux\";\nimport InputCom from '../../components/Form/InputCom';\nimport { useEffect, useState } from \"react\";\nimport { unSetApiSucc, unSetApiFail } from \"reducers/mainSlice\";\nimport NProgress from 'nprogress';\nimport { toast } from \"react-toastify\";\nimport { getMainSetting, getStoreDetail, updateMainSetting } from \"../../reducers/settingSlice\";\n\nfunction Index() {\n  var _storeDetail$data2;\n\n  const dispatch = useDispatch();\n  const storeDetail = useSelector(state => state.settingSlice.storeDetail);\n  const setting = useSelector(state => state.settingSlice.main);\n  const apiError = useSelector(state => state.mainSlice.failed);\n  const apiSuccess = useSelector(state => state.mainSlice.success);\n  const {\n    0: alert,\n    1: setAlert\n  } = useState({\n    status: false,\n    message: '',\n    type: ''\n  });\n  useEffect(() => {\n    dispatch(getStoreDetail());\n  }, []);\n  useEffect(() => {\n    var _storeDetail$data;\n\n    dispatch(getMainSetting({\n      storeId: storeDetail === null || storeDetail === void 0 ? void 0 : (_storeDetail$data = storeDetail.data) === null || _storeDetail$data === void 0 ? void 0 : _storeDetail$data._id\n    }));\n  }, [storeDetail]);\n  console.log(\"setting\", setting);\n  const validationSchema = Yup.object().shape({\n    fixLimitDeliveryDistance: Yup.number().typeError('Min delivery distance must be a number').required('Min delivery distance is required').positive('Must be a positive number'),\n    deliveryDistance: Yup.number().typeError('Delivery distance must be a number').required('Delivery distance is required').min(1, 'Delivery distance must be greater than 1'),\n    minDeliveryCharge: Yup.number().typeError('Min delivery charge must be a number').required('Min delivery charge is required').positive('Must be a positive number'),\n    deliveryExtraFeeUnit: Yup.number().typeError('Delivery extra fee unit must be a number').required('Delivery extra fee unit is required').positive('Must be a positive number'),\n    deliveryExtraFee: Yup.number().typeError('Delivery extra fee must be a number').required('Delivery extra fee is required').positive('Must be a positive number')\n  });\n\n  const formSubmitHandal = formData => {\n    // console.log('final data',formData);\n    NProgress.start();\n    dispatch(updateMainSetting(formData));\n  };\n\n  useEffect(() => {\n    if (apiSuccess) {\n      if (apiSuccess.statusCode >= 200 && apiSuccess.statusCode < 300) {\n        setAlert({\n          status: true,\n          message: apiSuccess.message,\n          type: 'success'\n        });\n        NProgress.done();\n        dispatch(unSetApiSucc());\n        setTimeout(() => {\n          setAlert({\n            status: false,\n            message: '',\n            type: ''\n          }); //   dispatch(unSetApiSucc())\n        }, 3000);\n      }\n\n      if (apiError) {\n        if (apiError.statusCode >= 400 && apiError.statusCode <= 500) {\n          setAlert({\n            status: true,\n            message: apiError.message,\n            type: 'error'\n          });\n          dispatch(unSetApiFail());\n          NProgress.done();\n          setTimeout(() => {\n            setAlert({\n              status: false,\n              message: '',\n              type: ''\n            });\n          }, 3000);\n        }\n      }\n    }\n  }, [apiSuccess, apiError]);\n\n  if (alert.status) {\n    toast(alert.message, {\n      type: alert.type\n    });\n  }\n\n  return /*#__PURE__*/_jsxs(_Fragment, {\n    children: [/*#__PURE__*/_jsx(UserHeader, {}), /*#__PURE__*/_jsx(Container, {\n      className: \"mt--7\",\n      fluid: true,\n      children: /*#__PURE__*/_jsx(Row, {\n        children: /*#__PURE__*/_jsx(Col, {\n          className: \"order-xl-1\",\n          xl: \"12\",\n          children: /*#__PURE__*/_jsxs(Card, {\n            className: \"bg-secondary shadow\",\n            children: [/*#__PURE__*/_jsx(CardHeader, {\n              className: \"bg-white border-0\",\n              children: /*#__PURE__*/_jsx(Row, {\n                className: \"align-items-center\",\n                children: /*#__PURE__*/_jsx(Col, {\n                  xs: \"8\",\n                  children: /*#__PURE__*/_jsx(\"h3\", {\n                    className: \"mb-0\",\n                    children: \"Delivery Fee Setting\"\n                  })\n                })\n              })\n            }), /*#__PURE__*/_jsx(CardBody, {\n              children: (storeDetail === null || storeDetail === void 0 ? void 0 : (_storeDetail$data2 = storeDetail.data) === null || _storeDetail$data2 === void 0 ? void 0 : _storeDetail$data2.deliveryType) === 0 ? /*#__PURE__*/_jsx(Row, {\n                className: \"align-items-center\",\n                children: /*#__PURE__*/_jsx(Col, {\n                  xs: \"12\",\n                  style: {\n                    textAlign: \"center\"\n                  },\n                  children: /*#__PURE__*/_jsx(\"p\", {\n                    className: \"mb-0\",\n                    children: \"No data found\"\n                  })\n                })\n              }) : /*#__PURE__*/_jsx(Formik, {\n                enableReinitialize: true,\n                initialValues: setting,\n                validationSchema: validationSchema,\n                validateOnChange: false,\n                validateOnBlur: false,\n                onSubmit: values => formSubmitHandal(values),\n                children: formikProps => {\n                  var _formikProps$values, _formikProps$errors, _formikProps$values2, _formikProps$errors2, _formikProps$values3, _formikProps$errors3, _formikProps$values4, _formikProps$errors4, _formikProps$values5, _formikProps$errors5;\n\n                  return /*#__PURE__*/_jsx(Form, {\n                    onSubmit: formikProps.handleSubmit,\n                    children: /*#__PURE__*/_jsxs(Row, {\n                      children: [/*#__PURE__*/_jsx(Col, {\n                        lg: \"12\",\n                        children: /*#__PURE__*/_jsxs(Row, {\n                          children: [/*#__PURE__*/_jsx(Col, {\n                            lg: \"6\",\n                            children: /*#__PURE__*/_jsxs(FormGroup, {\n                              children: [/*#__PURE__*/_jsx(\"label\", {\n                                className: \"form-control-label\",\n                                children: \"Fix limit delivery distance (Miles) \"\n                              }), /*#__PURE__*/_jsx(InputCom, {\n                                type: \"text\",\n                                name: \"fixLimitDeliveryDistance\",\n                                placeholder: \"Fix limit delivery distance\",\n                                getValue: formikProps.setFieldValue,\n                                defValue: formikProps === null || formikProps === void 0 ? void 0 : (_formikProps$values = formikProps.values) === null || _formikProps$values === void 0 ? void 0 : _formikProps$values.fixLimitDeliveryDistance,\n                                error: formikProps === null || formikProps === void 0 ? void 0 : (_formikProps$errors = formikProps.errors) === null || _formikProps$errors === void 0 ? void 0 : _formikProps$errors.fixLimitDeliveryDistance\n                              })]\n                            })\n                          }), /*#__PURE__*/_jsx(Col, {\n                            lg: \"6\",\n                            children: /*#__PURE__*/_jsxs(FormGroup, {\n                              children: [/*#__PURE__*/_jsx(\"label\", {\n                                className: \"form-control-label\",\n                                children: \"Max Delivery Distance (Miles) \"\n                              }), /*#__PURE__*/_jsx(InputCom, {\n                                type: \"text\",\n                                name: \"deliveryDistance\",\n                                placeholder: \"Delivery Distance\",\n                                getValue: formikProps.setFieldValue,\n                                defValue: formikProps === null || formikProps === void 0 ? void 0 : (_formikProps$values2 = formikProps.values) === null || _formikProps$values2 === void 0 ? void 0 : _formikProps$values2.deliveryDistance,\n                                error: formikProps === null || formikProps === void 0 ? void 0 : (_formikProps$errors2 = formikProps.errors) === null || _formikProps$errors2 === void 0 ? void 0 : _formikProps$errors2.deliveryDistance\n                              })]\n                            })\n                          }), /*#__PURE__*/_jsx(Col, {\n                            lg: \"4\",\n                            children: /*#__PURE__*/_jsxs(FormGroup, {\n                              children: [/*#__PURE__*/_jsx(\"label\", {\n                                className: \"form-control-label\",\n                                children: \"Min Delivery Fee (\\xA3)\"\n                              }), /*#__PURE__*/_jsx(InputCom, {\n                                type: \"text\",\n                                name: \"minDeliveryCharge\",\n                                placeholder: \"Min Delivery Fee\",\n                                getValue: formikProps.setFieldValue,\n                                defValue: formikProps === null || formikProps === void 0 ? void 0 : (_formikProps$values3 = formikProps.values) === null || _formikProps$values3 === void 0 ? void 0 : _formikProps$values3.minDeliveryCharge,\n                                error: formikProps === null || formikProps === void 0 ? void 0 : (_formikProps$errors3 = formikProps.errors) === null || _formikProps$errors3 === void 0 ? void 0 : _formikProps$errors3.minDeliveryCharge\n                              })]\n                            })\n                          }), /*#__PURE__*/_jsx(Col, {\n                            lg: \"4\",\n                            children: /*#__PURE__*/_jsxs(FormGroup, {\n                              children: [/*#__PURE__*/_jsx(\"label\", {\n                                className: \"form-control-label\",\n                                children: \"Extra Delivery Fee Unit (Miles)\"\n                              }), /*#__PURE__*/_jsx(InputCom, {\n                                type: \"text\",\n                                name: \"deliveryExtraFeeUnit\",\n                                placeholder: \"Extra Delivery Fee Unit\",\n                                getValue: formikProps.setFieldValue,\n                                defValue: formikProps === null || formikProps === void 0 ? void 0 : (_formikProps$values4 = formikProps.values) === null || _formikProps$values4 === void 0 ? void 0 : _formikProps$values4.deliveryExtraFeeUnit,\n                                error: formikProps === null || formikProps === void 0 ? void 0 : (_formikProps$errors4 = formikProps.errors) === null || _formikProps$errors4 === void 0 ? void 0 : _formikProps$errors4.deliveryExtraFeeUnit\n                              })]\n                            })\n                          }), /*#__PURE__*/_jsx(Col, {\n                            lg: \"4\",\n                            children: /*#__PURE__*/_jsxs(FormGroup, {\n                              children: [/*#__PURE__*/_jsx(\"label\", {\n                                className: \"form-control-label\",\n                                children: \"Extra Delivery Fee (\\xA3)\"\n                              }), /*#__PURE__*/_jsx(InputCom, {\n                                type: \"text\",\n                                name: \"deliveryExtraFee\",\n                                placeholder: \"Extra Delivery Fee\",\n                                getValue: formikProps.setFieldValue,\n                                defValue: formikProps === null || formikProps === void 0 ? void 0 : (_formikProps$values5 = formikProps.values) === null || _formikProps$values5 === void 0 ? void 0 : _formikProps$values5.deliveryExtraFee,\n                                error: formikProps === null || formikProps === void 0 ? void 0 : (_formikProps$errors5 = formikProps.errors) === null || _formikProps$errors5 === void 0 ? void 0 : _formikProps$errors5.deliveryExtraFee\n                              })]\n                            })\n                          })]\n                        })\n                      }), /*#__PURE__*/_jsx(Col, {\n                        lg: \"12\",\n                        children: /*#__PURE__*/_jsx(Button, {\n                          className: \"float-right\",\n                          color: \"primary\",\n                          type: \"submit\",\n                          children: \"Save\"\n                        })\n                      })]\n                    })\n                  });\n                }\n              })\n            })]\n          })\n        })\n      })\n    })]\n  });\n}\n\nIndex.layout = Vendor;\nexport default Index;","map":null,"metadata":{},"sourceType":"module"}